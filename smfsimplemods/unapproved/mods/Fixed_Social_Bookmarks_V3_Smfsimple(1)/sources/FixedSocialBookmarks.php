<?php/*---------------------------------------------------------------------------------*	Fixed Social Bookmarks												 		  **	Version 3.0																	  **	Author: 4kstore																  **	Copyright 2013												        		  **	Powered by www.smfsimple.com												  **********************************************************************************************************************************************************************/if (!defined('SMF'))	die('Hacking attempt...');function fsb_admin_area(&$areas){	global $txt;		loadLanguage('FixedSocialBookmarks');	$areas['config']['areas']['modsettings']['subsections']['fixedsocialbookmarks'] = array($txt['fsb_admin']);}function fsb_modify_modifications(&$sub_actions){	$sub_actions['fixedsocialbookmarks'] = 'fsb_settings';}function fsb_settings(&$return_config = false){	global $context, $txt, $scripturl;		loadLanguage('FixedSocialBookmarks');	$context['page_title'] = $txt['fsb_admin'];	$context['settings_title'] = $txt['fsb_admin'];	$context['settings_message'] = $txt['fsb_admin_desc'];	$context['post_url'] = $scripturl . '?action=admin;area=modsettings;save;sa=fixedsocialbookmarks';	$config_vars = array(		array('check', 'allforum_fixed_enable'),		array('check', 'display_fixed_enable'),		array('check', 'index_fixed_enable'),		array('select', 'sb_zone_float', array('left' => $txt['sb_show_left'], 'right' => $txt['sb_show_right'])),		array('check', 'sbfacebook_enable'),		array('check', 'sbtwitter_enable'),		array('check', 'sbtechnorati_enable'),		array('check', 'sbReddit_enable'),		array('check', 'sbMySpace_enable'),		array('check', 'sbLinkEdin_enable'),	    array('check', 'sbDelicious_enable'),		array('check', 'sbDigg_enable'),		array('check', 'sbStum_enable'),		array('check', 'sbNewsVine_enable'),	);	if ($return_config)		return $config_vars;	if (isset($_GET['save']))	{					checkSession();		saveDBSettings($config_vars);		writeLog();	}	prepareDBSettingContext($config_vars);}function fsb_load_theme(){	global $context, $modSettings, $user_info, $settings;	if (!empty($modSettings['allforum_fixed_enable']))	{		$context['html_headers'] .='<link rel="stylesheet" type="text/css" href="'.$settings['default_theme_url'].'/css/FixedSocialBookmarks.css" />';			FixedSocialbookmarks();		loadTemplate('FixedSocialBookmarks');		$context['template_layers'][] = 'fsb_tpl';	}	else	{		if (!empty($modSettings['index_fixed_enable']) && !empty($_REQUEST['board']) && ($context['current_action'] != ('post' || 'post2')))		{			$context['html_headers'] .='<link rel="stylesheet" type="text/css" href="'.$settings['default_theme_url'].'/css/FixedSocialBookmarks.css" />';				FixedSocialbookmarks();			loadTemplate('FixedSocialBookmarks');			$context['template_layers'][] = 'fsb_tpl';		}		if (!empty($modSettings['display_fixed_enable']) && !empty($_REQUEST['topic']))			{			$context['html_headers'] .='<link rel="stylesheet" type="text/css" href="'.$settings['default_theme_url'].'/css/FixedSocialBookmarks.css" />';				FixedSocialbookmarks();			loadTemplate('FixedSocialBookmarks');			$context['template_layers'][] = 'fsb_tpl';		}	}	}function FixedSocialbookmarks(){	global $context, $scripturl, $modSettings, $txt;	loadLanguage('FixedSocialBookmarks');	$siteurl = $scripturl . '?topic=' . !empty($context['current_topic']) . '.0';		$context['social_bookmarks'] = array(		'twitter' => array(			'text' => $txt['sbtwitter_enable'],					 			'title' => $txt['sbtwitter_enable'],			'id' => 'twitter',			'href' => 'http://twitter.com/home?status='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbtwitter_enable']) ? true : false, 		),			'facebook' => array(			'text' => $txt['sbfacebook_enable'],					 			'title' => $txt['sbfacebook_enable'],			'id' => 'facebook',			'href' => 'http://www.facebook.com/share.php?u='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbfacebook_enable']) ? true : false,		),		'myspace' => array(			'text' => $txt['sbMySpace_enable'],					 			'title' => $txt['sbMySpace_enable'],			'id' => 'myspace',			'href' => 'http://www.myspace.com/Modules/PostTo/Pages/?u='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbMySpace_enable']) ? true : false,		),				'technorati' => array(			'text' => $txt['sbtechnorati_enable'],					 			'title' => $txt['sbtechnorati_enable'],			'id' => 'technorati',			'href' => 'http://www.technorati.com/faves?add='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbtechnorati_enable']) ? true : false,		),		'reddit' => array(			'text' => $txt['sbReddit_enable'],					 			'title' => $txt['sbReddit_enable'],			'id' => 'reddit',			'href' => 'http://reddit.com/submit?url='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbReddit_enable']) ? true : false,		),		'linkedin' => array(			'text' => $txt['sbLinkEdin_enable'],					 			'title' => $txt['sbLinkEdin_enable'],			'id' => 'linkedin',			'href' => 'http://www.linkedin.com/shareArticle?mini=true&amp;url='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbLinkEdin_enable']) ? true : false,		),		'delicious' => array(			'text' => $txt['sbDelicious_enable'],					 			'title' => $txt['sbDelicious_enable'],			'id' => 'delicious',			'href' => 'http://del.icio.us/post?url='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbDelicious_enable']) ? true : false,		),		'digg' => array(			'text' => $txt['sbDigg_enable'],					 			'title' => $txt['sbDigg_enable'],			'id' => 'digg',			'href' => 'http://digg.com/submit?phase=2&amp;url='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbDigg_enable']) ? true : false,		),		'stumbleupon' => array(			'text' => $txt['sbStum_enable'],					 			'title' => $txt['sbStum_enable'],			'id' => 'stumbleupon',			'href' => 'http://www.stumbleupon.com/submit?url='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbStum_enable']) ? true : false,		),		'newsvine' => array(			'text' => $txt['sbNewsVine_enable'],					 			'title' => $txt['sbNewsVine_enable'],			'id' => 'newsvine',			'href' => 'http://www.newsvine.com/_tools/seed&amp;save?u='.$siteurl.'',					'target' => '_blank',					'active' => !empty($modSettings['sbNewsVine_enable']) ? true : false,		),	);	}function fsb_Buffer($buffer){	global $forum_copyright, $context, $sourcedir;		require_once($sourcedir . '/QueryString.php');	ob_sessrewrite($buffer);		if(empty($context['deletforum']))	{		$context['deletforum'] = base64_decode('IHwgPGEgc3R5bGU9ImZvbnQtc2l6ZToxMHB4OyIgaHJlZj0iaHR0cDovL3d3dy5zbWZzaW1wbGUuY29tIiB0aXRsZT0iVG9kbyBwYXJhIHR1IGZvcm8gU01GIj5Nb2RzIGJ5IFNNRlNpbXBsZS5jb208L2E+');			$buffer = str_replace($forum_copyright, $forum_copyright.$context['deletforum'],$buffer);				}	return $buffer;}